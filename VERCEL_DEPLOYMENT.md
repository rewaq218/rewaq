# دليل نشر المشروع على Vercel

هذا الدليل يشرح خطوات نشر المشروع على منصة Vercel للاستضافة.

## الخطوة 1: إنشاء حساب على Vercel

1. قم بزيارة [موقع Vercel](https://vercel.com)
2. انقر على "Sign Up" لإنشاء حساب جديد
3. يمكنك التسجيل باستخدام حساب GitHub أو Google أو GitLab أو البريد الإلكتروني

## الخطوة 2: إنشاء مشروع Supabase

1. قم بزيارة [موقع Supabase](https://supabase.com)
2. قم بإنشاء حساب جديد أو تسجيل الدخول
3. انقر على "New Project" لإنشاء مشروع جديد
4. أدخل اسم المشروع واختر كلمة مرور قوية لقاعدة البيانات
5. اختر المنطقة الأقرب إليك
6. انقر على "Create new project" وانتظر حتى يتم إنشاء المشروع (قد يستغرق ذلك بضع دقائق)

## الخطوة 3: إعداد قاعدة البيانات Supabase

1. بعد إنشاء المشروع، انتقل إلى قسم "SQL Editor"
2. انقر على "New Query"
3. انسخ محتوى ملف `supabase/schema.sql` وألصقه في محرر SQL
4. انقر على "Run" لتنفيذ الاستعلام وإنشاء الجداول والسياسات

## الخطوة 4: إنشاء مخزن للملفات

1. انتقل إلى قسم "Storage" في لوحة تحكم Supabase
2. انقر على "Create new bucket"
3. أدخل اسم المخزن: `student_files`
4. حدد خيار "Public bucket" للسماح بالوصول العام للملفات
5. انقر على "Create bucket"

## الخطوة 5: الحصول على بيانات الاتصال

1. انتقل إلى قسم "Settings" ثم "API" في لوحة تحكم Supabase
2. ستجد URL المشروع تحت عنوان "Project URL"
3. ستجد مفتاح API العام تحت عنوان "anon" "public"
4. احتفظ بهذه البيانات لاستخدامها في الخطوات التالية

## الخطوة 6: رفع المشروع على GitHub

1. قم بإنشاء مستودع جديد على GitHub باسم `rewaq`
2. قم برفع المشروع إلى المستودع باستخدام الأوامر التالية:

```
git init
git add .
git commit -m "النسخة الأولى من نظام تسجيل بيانات دارسي العلوم الشرعية"
git remote add origin https://github.com/rewaq218/rewaq.git
git branch -M main
git push -u origin main
```

## الخطوة 7: نشر المشروع على Vercel

1. قم بتسجيل الدخول إلى [Vercel](https://vercel.com)
2. انقر على "Add New..." ثم "Project"
3. اختر مستودع GitHub الذي قمت بإنشائه (rewaq)
4. في صفحة إعدادات المشروع، قم بإضافة متغيرات البيئة التالية:
   - `NEXT_PUBLIC_SUPABASE_URL`: أدخل URL المشروع الذي حصلت عليه من الخطوة 5
   - `NEXT_PUBLIC_SUPABASE_ANON_KEY`: أدخل مفتاح API العام الذي حصلت عليه من الخطوة 5
5. انقر على "Deploy"

## الخطوة 8: إعداد CORS في Supabase

1. بعد نشر المشروع على Vercel، ستحصل على عنوان URL للموقع (مثل `https://rewaq.vercel.app`)
2. انتقل إلى لوحة تحكم Supabase الخاصة بمشروعك
3. انتقل إلى "Settings" ثم "API"
4. في قسم "API Settings"، أضف عنوان موقعك على Vercel إلى قائمة "Additional Allowed Origins"
5. انقر على "Save"

## الخطوة 9: اختبار الموقع

1. قم بزيارة موقعك على Vercel (مثل `https://rewaq.vercel.app`)
2. تأكد من أن جميع الوظائف تعمل بشكل صحيح:
   - تسجيل بيانات طالب جديد
   - رفع الملفات
   - الوصول إلى لوحة تحكم المشرف (admin.html)
   - تصدير البيانات إلى Excel

## استكشاف الأخطاء وإصلاحها

إذا واجهت أي مشاكل، يمكنك استخدام الملفات التالية للتشخيص:

- `test-supabase.html`: لاختبار الاتصال بقاعدة بيانات Supabase
- `test-vercel.html`: للتأكد من أن Vercel يعمل بشكل صحيح

### مشاكل شائعة وحلولها:

1. **خطأ CORS**: تأكد من إضافة عنوان موقعك على Vercel إلى قائمة "Additional Allowed Origins" في إعدادات Supabase
2. **خطأ في رفع الملفات**: تأكد من إنشاء مخزن `student_files` وإعداد السياسات الصحيحة
3. **خطأ في الاتصال بقاعدة البيانات**: تأكد من صحة URL ومفتاح API في متغيرات البيئة

## الدعم والمساعدة

إذا كنت بحاجة إلى مزيد من المساعدة، يمكنك:

- مراجعة [وثائق Vercel](https://vercel.com/docs)
- مراجعة [وثائق Supabase](https://supabase.com/docs)
- التواصل مع فريق الدعم الفني
